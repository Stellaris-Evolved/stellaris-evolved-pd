ap_arcology_project = {
	potential = {
		host_has_dlc = "Megacorp"
		#	is_regular_empire = yes
		NOR = { 
			tec_is_agrarian_idyll_empire = yes
			has_ethic = ethic_fanatic_green
		}
		NOT = {
			has_ascension_perk = ap_arcology_project
		}
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_technology_housing_2"
			has_technology = tech_housing_2
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}

		custom_tooltip = {
			fail_text = tec_ap_deactivated
			NOT = {
				has_ascension_perk = ap_tec_sidereal_arcologies
			}
		}
	}

	on_enabled = {
		custom_tooltip = "allow_arcology_project"
		custom_tooltip = "decision_arcology_project_effects"
		custom_tooltip = "tec_decision_arcology_project_extra_effects"
		if = {
			limit = { 
				has_planetary_diversity_planetaryhabitats = yes
			}
			custom_tooltip = "tec_jumptext"
			custom_tooltip = "tec_allow_pdplanethab_arcology_project"
			custom_tooltip = "decision_tec_pdplanethab_arcology_project_effects"
		}
		custom_tooltip = tec_ap_arcology_steps
		if = {
			limit = { 
				NOT = {
					has_ascension_perk = ap_tec_sidereal_arcologies
				}
			}
			custom_tooltip =  tec_ap_block_others
		}
	}

	ai_weight = {
		weight = 0
		modifier = { 
			add = @tec_high_ap_weight 
			OR = {
				any_owned_planet = {
					num_pops > 70
				}
				has_origin = origin_remnants 
			}
		}
		modifier = {
			add = 2
			has_ethic = ethic_pacifist
		}
		modifier = {
			add = -5
			tec_is_terraformer_empire = yes
		}
		modifier = {
			add = 4
			has_ethic = ethic_fanatic_pacifist
		}
		modifier = {
			add = 3
			has_ethic = ethic_industrial
		}
		modifier = {
			add = 6
			has_ethic = ethic_fanatic_industrial
		}
		modifier = {
			add = 2
			has_ethic = ethic_materialist
		}
		modifier = {
			add = 4
			has_ethic = ethic_fanatic_materialist
		}

		modifier = {
			add = -5 # proxy for origins giving perfect planets
			capital_scope = {
				tec_is_perfect_planet = yes
			}
		}
		# force
		modifier = { # specialize ecu
			add = @tec_force_ap_weight
			OR = {
				any_owned_planet = {
					OR = {
						uses_district_set = city_world
						is_planet_class = pc_relic
					}
				}
				has_origin = origin_remnants
			}
		}
		# disablers - electric bugaloo
		inline_script = ascension_perks/weights/inline_evolved_force_main_path
		
		modifier = {
			factor = 0
			has_origin = origin_void_dwellers
		}
	}
}